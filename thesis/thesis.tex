%\documentclass[a4paper,DIV=8]{scrbook}

%\usepackage{fontspec}
%\usepackage{unicode-math}
%\setmainfont{TeX Gyre Pagella}
%\setmathfont{TeX Gyre Pagella Math}

%\usepackage[ngerman]{babel}
%\usepackage{blindtext}


%\begin{document}

%\blindmathpaper
%\blindmathpaper

%\end{document}

%\documentclass[11pt,twoside,BCOR=12mm,DIV=9,headings=small]{scrreprt}
\newif\ifbook
\bookfalse
\ifbook
\documentclass[10pt,a4paper,twoside]{report}
\else
\documentclass[10pt,a4paper]{report}
\usepackage[bottom=2cm,top=2cm,foot=.8cm,left=1.5cm,right=4cm,a4paper]{geometry}
\fi

\usepackage[ngerman]{babel}
\usepackage[fleqn]{mathtools}
\usepackage{fontspec}
\usepackage{unicode-math}
\usepackage{setspace}
\ifbook
\usepackage[DIV=9]{typearea}
\setmainfont{Gentium Plus}
\setmathfont{TeX Gyre Pagella Math}
\setmathfont[range=it]{Gentium Plus Italic}
\setsansfont[Scale=MatchLowercase]{Noto Sans}
\setmonofont[Scale=MatchUppercase]{Latin Modern Mono}
\setlength{\baselineskip}{12pt}
%\newfontfamily\cyrfont{Linux Libertine}[Scale=MatchLowercase]
\newcommand\cyrfont[1]{#1}
\else
%\setmainfont{CMU Serif}
\setsansfont[Scale=MatchLowercase]{Noto Sans}
\setmonofont[Scale=MatchUppercase]{Latin Modern Mono}
\newfontfamily\cyrfont{CMU Serif}[Scale=MatchLowercase]
\fi
\usepackage{mdframed}
\usepackage[pdfusetitle,pdfencoding=auto,psdextra,bookmarksopen]{hyperref}
\usepackage{xcolor}
\usepackage{ragged2e}
\usepackage{enumitem}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows,positioning}

\setlength{\emergencystretch}{2em}
\AtBeginDocument{\widowpenalty10000\clubpenalty10000}
\ifbook
\AtBeginDocument{\setlength{\abovedisplayskip}{5pt}\setlength{\abovedisplayshortskip}{5pt}%
\setlength{\belowdisplayskip}{3pt}\setlength{\belowdisplayshortskip}{3pt}}
\fi

\usepackage{titlesec}		% header customization
\usepackage{titletoc}		% toc customization
\usepackage{titleps}		% toc customization
\usepackage[titles]{tocloft}% lof lot lol customizatios

%	header formatting
\ifbook
\titlespacing*{\part}{.2\linewidth}{.3\textheight}{0pt}
\titlespacing*{\chapter}{0pt}{-10pt}{25pt}
\titleformat{\part}%[hang]
	{\thispagestyle{empty}\huge\raggedleft}
	{\Large\lsstyle\MakeUppercase{\partname}~~\thepart\normalfont}
	{0em}
	{\vskip 12pt \setstretch{0.9}\huge\lsstyle\sffamily\uppercase}
% \let\oldpart\part
% \renewcommand{\part}{
% }
%\titleformat{\chapter}[block]
	%{\begin{wide}\thispagestyle{empty}\itshape\huge}
	%{\normalfont\bfseries\huge\thechapter}
	%{1em}
	%{\setstretch{0.9}\raggedright\huge\itshape}[\end{wide}]
\titleformat{\chapter}
    {\thispagestyle{empty}\itshape\huge}
	{\normalfont\bfseries\huge\thechapter}
	{1em}
	{\setstretch{0.9}\raggedright\huge\itshape}
\titleformat{\section}
	{\itshape\Large}
	{\normalfont\thesection}
	{1em}
	{\setstretch{0.9}\raggedright\itshape}
\titleformat{\subsection}
	{\itshape\large}
	{\raggedright\normalfont\thesubsection}
	{1em}
	{\setstretch{0.9}\itshape}
\titleformat{\subsubsection}[runin]
	{}
	{\itshape\thesubsubsection}
	{1ex}
	{\itshape}[~~$\cdot$]

\contentsmargin[1cm]{0cm}
\titlecontents*{part}[0em]
	{\large\scshape}
	{\scshape\thecontentslabel}
	{\vskip 4pt\large\scshape\lowercase}
	{}[\vskip 0pt]
\titlecontents{chapter}[0em]
	{\large\vspace{12pt}}
	{\makebox[-1em][r]{\thecontentslabel}\large\hspace{1em}}
	{\large}
	{~~~~{\contentspage}}[\vskip 2pt]
\titlecontents*{section}[0em]
	{\small}
	{\thecontentslabel~~}
	{\small}
	{~~{\contentspage}}
	[\\]

%	toc offset
\let\oldtoc\tableofcontents
\renewcommand{\tableofcontents}{%
	\begin{quote}\setstretch{1.0}
	\oldtoc
	\end{quote}
}
%	toc depth
\AtBeginDocument{\setcounter{tocdepth}{1}}

\newpagestyle{main}{
\sethead[\thepage][][\sffamily{\chaptertitle}] % even
{\sffamily\sectiontitle}{}{\thepage}} % odd
\pagestyle{main}

\else

\titleformat{\chapter}
{\normalfont\Large\bfseries}{\thechapter}{1em}{}
\titleformat{\section}
{\normalfont\large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}
{\normalfont\bfseries}{\thesubsection}{1em}{}

\titlespacing*{\chapter} {0pt}{3.5ex plus 1ex minus .2ex}{2.3ex plus .2ex}
\titlespacing*{\section} {0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}

\fi



\usepackage{xparse}
\usepackage{amsthm}
\usepackage{thmtools}
\usepackage{thm-restate}
\newtheorem{theorem}{Satz}[chapter]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{claim}[theorem]{Behauptung}
\newtheorem{corollary}[theorem]{Korollar}
\newtheorem{observation}[theorem]{Beobachtung}
\newtheorem{conjecture}[theorem]{Vermutung}
\newtheorem{question}[theorem]{Frage}
\newtheorem*{remark}{Anmerkung}
\makeatletter
\def\rep@title{}
\newtheorem*{rep@theorem}{\protect\rep@title}
\NewDocumentEnvironment{reptheorem}{ m m o }
 {
  \def\rep@title{#1 \ref{#2}}%
  \IfNoValueTF{#3}
  {\begin{rep@theorem}}
  {\begin{rep@theorem}[#3]}
 }
 {\end{rep@theorem}}
\makeatother


%\theoremstyle{definition}
%\newtheorem{definition}[theorem]{Definition}
\declaretheorem[style=definition,qed={$\triangleleft$},sibling=theorem]{definition}
\makeatletter
\renewenvironment{proof}[1][\proofname]{\par
  \begin{mdframed}[backgroundcolor=lightgray!30!white,leftmargin=-5pt,rightmargin=-5pt,innerleftmargin=5pt,innerrightmargin=5pt,linewidth=0pt,skipabove=0pt,skipbelow=10pt]
  \pushQED{\qed}%
  \ifbook\else
    \normalfont\footnotesize%
  \fi
  \topsep6\p@\@plus6\p@\relax
  \list{}{\leftmargin=0em
          \rightmargin=\leftmargin
          \settowidth{\itemindent}{\itshape#1}%
          \labelwidth=\itemindent
          % the following line is not needed with amsart, but might be with other classes
          \parsep=0pt \listparindent=\parindent 
  }
  \item[\hskip\labelsep
        \itshape
    #1\@addpunct{.}]\ignorespaces
}{%
    \popQED\endlist\@endpefalse\end{mdframed}
}
\makeatother



\setlist[enumerate]{label=(\arabic*), itemsep=0pt}
\setlist[enumerate,2]{label=(\arabic{enumi}.\arabic*), itemsep=0pt}
\setlist[itemize]{itemsep=0pt}
\setlist{beginpenalty=10000, midpenalty=10000}
\newlist{Prooflist}{enumerate}{1}
\setlist[Prooflist]{wide,labelwidth=!,leftmargin=0pt,itemindent=!,labelindent=0pt,label={\arabic*.},labelsep=3pt,itemsep=.3em plus .2em minus .1em}
\newenvironment{prooflist}[1][]{%
    \begin{Prooflist}[#1]%
}{%
    \qedhere\end{Prooflist}%
}


\usepackage[autostyle]{csquotes}
\usepackage[labelfont={bf,sf},textfont=sf]{caption}
\counterwithout{figure}{chapter}

%\usepackage[authordate,url=false,dashed=false]{biblatex-chicago}
\usepackage[style=myauthoryear,backend=biber,mergedate=false,maxbibnames=99,dashed=false]{biblatex}
\addbibresource{zoterolib.bib}
\DeclareSourcemap{
  \maps[datatype=bibtex]{
     \map{
        \step[fieldsource=doi,final]
        \step[fieldset=isbn,null]
        }
      }
}
\setlength{\bibitemsep}{3pt}
\renewcommand*{\nameyeardelim}{\addcomma\space}

\usepackage{url}
\urlstyle{same}

\usepackage[vlined,linesnumbered,nofillcomment,german,onelanguage]{algorithm2e}
\DontPrintSemicolon
\SetArgSty{}
\SetCommentSty{itshape}
\SetKwComment{tcc}{(}{)}
\SetKwComment{tcp}{(}{)}
\SetKw{KwOr}{\thesis@algorithmor}
\SetKw{KwAnd}{\thesis@algorithmand}
\SetKw{KwNot}{\thesis@algorithmnot}
\SetKw{Accept}{akzeptieren}
\SetKw{AcceptWith}{akzeptiere mit}
\SetKw{Reject}{ablehnen}
\SetKwInput{Input}{\thesis@algorithminput}
\SetKwInput{Output}{\thesis@algorithmoutput}
\setlength{\algomargin}{6ex}

\usepackage{sidenotes}
\setlength{\marginparwidth}{90pt}
\renewcommand*{\marginfont}{\footnotesize\sffamily}

\makeatletter
\RenewDocumentCommand\sidenotetext{ o o +m }{%
    \IfNoValueOrEmptyTF{#1}{%
        \@sidenotes@placemarginal{#2}{\noindent\marginfont\RaggedRight{\thesidenote{}.~#3}}%
        \refstepcounter{sidenote}%
    }{%
        \@sidenotes@placemarginal{#2}{\noindent\marginfont\RaggedRight{#1.~#3}}%
    }%
}
\makeatother

\newcommand{\todo}[1]{\textcolor{red}{{\sffamily TODO: #1}}}
\newcommand{\note}[1]{\textcolor{green!30!black}{{\sffamily #1}}}



\def\P{\ensuremath{\mathrm{P}}}
\def\NP{\ensuremath{\mathrm{NP}}}
\def\NE{\ensuremath{\mathrm{NE}}}
\def\NEE{\ensuremath{\mathrm{NEE}}}
\def\FP{\ensuremath{\mathrm{FP}}}
\def\UP{\ensuremath{\mathrm{UP}}}
\def\DisjNP{\ensuremath{\mathrm{DisjNP}}}
\def\DisjCoNP{\ensuremath{\mathrm{DisjCoNP}}}
\def\DisjUP{\ensuremath{\mathrm{DisjUP}}}
\def\DisjCoUP{\ensuremath{\mathrm{DisjCoUP}}}
\def\coNP{\ensuremath{\mathrm{coNP}}}
\def\coNE{\ensuremath{\mathrm{coNE}}}
\def\coNEE{\ensuremath{\mathrm{coNEE}}}
\def\coUP{\ensuremath{\mathrm{coUP}}}
\def\NPcoNP{\ensuremath{\mathrm{NP}\cap\mathrm{coNP}}}
\def\FNP{\ensuremath{\mathrm{FNP}}}
\def\TFNP{\ensuremath{\mathrm{TFNP}}}
\def\TALLY{\ensuremath{\mathrm{TALLY}}}
\def\NPMV{\ensuremath{\mathrm{NPMV}}}
\def\NPMVt{\ensuremath{\mathrm{NPMV_t}}}
\def\NPSV{\ensuremath{\mathrm{NPSV}}}
\def\NPSVt{\ensuremath{\mathrm{NPSV_t}}}
\def\NPbV{\ensuremath{\mathrm{NPbV}}}
\def\NPbVt{\ensuremath{\mathrm{NPbV_t}}}
\def\NPkV{\ensuremath{\mathrm{NP}k\mathrm{V}}}
\def\NPkVt{\ensuremath{\mathrm{NP}k\mathrm{V_t}}}
\def\TAUT{\ensuremath{\mathrm{TAUT}}}
\def\SAT{\ensuremath{\mathrm{SAT}}}
\def\PF{\ensuremath{\mathrm{PF}}}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\ran}{ran}
\DeclareMathOperator{\supp}{supp}
\def\hQ{\ensuremath{\mathsf{Q}}}
\def\hUP{\ensuremath{\mathsf{UP}}}
\def\hDisjNP{\ensuremath{\mathsf{DisjNP}}}
\def\hDisjCoNP{\ensuremath{\mathsf{DisjCoNP}}}
\def\hNPcoNP{\ensuremath{\mathsf{NP}{}\cap{}\mathsf{coNP}}}
\def\hTAUT{\ensuremath{\mathsf{TAUT}}}
\def\hSAT{\ensuremath{\mathsf{SAT}}}
\def\hTFNP{\ensuremath{\mathsf{TFNP}}}
\def\leqmpp{\ensuremath{\leq_\mathrm{m}^\mathrm{pp}}}
\def\leqlp{\ensuremath{\leq_\mathrm{L}^\mathrm{p}}}
\def\leqmp{\ensuremath{\leq_\mathrm{m}^\mathrm{p}}}
\DeclareMathOperator{\tower}{tower}
\DeclareMathOperator{\Proj}{Proj}
\DeclareMathOperator{\Sol}{Sol}
\def\mhyphen{\text{-}}
\def\fset{\ensuremath{\mathit{set}\mhyphen}}
\def\inc{\ensuremath{\in_\mathrm{c}}}
\def\defeq{\ensuremath{\stackrel{\text{df}}{=}}}
\def\subseteqc{\ensuremath{\subseteq_\mathrm{c}}}
\AtBeginDocument{\renewcommand{\phi}{\varphi}}
\AtBeginDocument{\renewcommand{\epsilon}{\varepsilon}}

\begin{document}
\pagestyle{empty}
\title{Komplexität von Suchproblemen und Beweissystemen}
\author{Anton Ehrmanntraut}
\maketitle
\tableofcontents
\clearpage

\ifbook
\pagestyle{main}
\else
\pagestyle{plain}
\fi
\input{maintext}


\printbibliography

\end{document}
